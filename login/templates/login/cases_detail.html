<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用例集</title>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdn.bootcss.com/bootstrap-select/2.0.0-beta1/js/bootstrap-select.js"></script>
    <link href="https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="http://cdn.bootcss.com/bootstrap-select/2.0.0-beta1/css/bootstrap-select.css">
    <script type="text/javascript">
        $(window).on('load', function () {

            $('.selectpicker').selectpicker({
                'selectedText': 'cat'
            });

        });
    </script>

    <style>
        th{
        white-space: nowrap;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="row">
    <h1 style="text-align: center">测试用例</h1>
        <div class="col-md-12 col-md-offset-0">
            <a href="/add_cases/" class="btn btn-success">添加用例</a>&nbsp;
{#            <a href="/delete_select/" class="btn btn-info">批量执行</a><br>#}

                    <div id="header-search-box" class="col-md-offset-9">
                        <form role="search" method="get" id="searchform" action="/search_case/">
                        {% csrf_token %}
                        <input type="search" class="search-query" name="query" placeholder="用例脚本名" required>
                        <button type="submit" class="btn btn-primary"><span class="ion-ios-search-strong">搜索</span></button>
                        </form>
                    </div>
            <table class="table-hover table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>id</th>
                        <th>用例中文名</th>
                        <th>用例英文名</th>
                        <th>用例步骤</th>
                        <th>用例脚本名</th>
                        <th>创建时间</th>
                        <th>功能</th>
                    </tr>
                </thead>
                <tobdy>
{#                #循环打印数据库中获取到的数据#}
                    {% for foo in case_list %} {# user_list类似列表对象 #}　　
                        <tr>
{#                        #pk显示的是数据库的主键#}
                            <td>{{ foo.pk }}</td>　　
                            <td>{{ foo.case_name_ch }}</td>
                            <td>{{ foo.case_name_en }}</td>
                            <td>{{ foo.case_steps }}</td>
                            <td>{{ foo.script_name }}</td>
                            <td>{{ foo.create_time }}</td>
                            <td>
                                <a href="/case_edit/?edit_id={{ foo.pk }}" class="btn btn-success">编辑</a>　　
                                <a href="/delete_case/?delete_id={{ foo.pk }} " class="btn btn-danger">删除</a>
                                <a href="/run_case/?run_id={{ foo.pk }} " class="btn btn-info">执行</a>
                                <a href="/test_report_single/?run_id={{ foo.pk }}" class="text-info">详情</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tobdy>
            </table>
            <a href="/index/" class="btn btn-success">返回首页</a><br>
        </div>
    </div>
</div>
{#        <!-- jQuery1.11.3 (necessary for Bo otstrap's JavaScript plugins) -->#}
{#        <script src="js/jquery-1.11.3.min.js "></script>#}
{#        <!-- Include all compiled plugins (below), or include individual files as needed -->#}
{#        <script src="js/bootstrap.min.js "></script>#}
{#        <script>#}
{#        $(function(){#}
{#            function initTableCheckbox() {#}
{#                var $thr = $('table thead tr');#}
{#                var $checkAllTh = $('<th><input type="checkbox" id="checkAll" name="checkAll" /></th>');#}
{#                /*将全选/反选复选框添加到表头最前，即增加一列*/#}
{#                $thr.prepend($checkAllTh);#}
{#                /*“全选/反选”复选框*/#}
{#                var $checkAll = $thr.find('input');#}
{#                $checkAll.click(function(event){#}
{#                    /*将所有行的选中状态设成全选框的选中状态*/#}
{#                    $tbr.find('input').prop('checked',$(this).prop('checked'));#}
{#                    /*并调整所有选中行的CSS样式*/#}
{#                    if ($(this).prop('checked')) {#}
{#                        $tbr.find('input').parent().parent().addClass('warning');#}
{#                    } else{#}
{#                        $tbr.find('input').parent().parent().removeClass('warning');#}
{#                    }#}
{#                    /*阻止向上冒泡，以防再次触发点击操作*/#}
{#                    event.stopPropagation();#}
{#                });#}
{#                /*点击全选框所在单元格时也触发全选框的点击操作*/#}
{#                $checkAllTh.click(function(){#}
{#                    $(this).find('input').click();#}
{#                });#}
{#                var $tbr = $('table tbody tr');#}
{#                var $checkItemTd = $('<td><input type="checkbox" name="checkItem" /></td>');#}
{#                /*每一行都在最前面插入一个选中复选框的单元格*/#}
{#                $tbr.prepend($checkItemTd);#}
{#                /*点击每一行的选中复选框时*/#}
{#                $tbr.find('input').click(function(event){#}
{#                    /*调整选中行的CSS样式*/#}
{#                    $(this).parent().parent().toggleClass('warning');#}
{#                    /*如果已经被选中行的行数等于表格的数据行数，将全选框设为选中状态，否则设为未选中状态*/#}
{#                    $checkAll.prop('checked',$tbr.find('input:checked').length == $tbr.length ? true : false);#}
{#                    /*阻止向上冒泡，以防再次触发点击操作*/#}
{#                    event.stopPropagation();#}
{#                });#}
{#                /*点击每一行时也触发该行的选中操作*/#}
{#                $tbr.click(function(){#}
{#                    $(this).find('input').click();#}
{#                });#}
{#            }#}
{#            initTableCheckbox();#}
{#        });#}
{#        </script>#}
</body>
</html>